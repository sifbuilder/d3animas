<!DOCTYPE html>
<meta charset="utf-8">
<title>animas</title>
<head >

  <style>
    body { margin:0;position:fixed;top:0;right:0;bottom:0;left:0; }
    div#fps,svg { position: fixed; top:0; left:0; color: white; }
  </style>

</head>
<body style="cursor:crosshair"></body>
<div id="viewframe" class="viewframe"></div>
<script src="elem-enls.js"></script>
<script src="elem-ents.js"></script>

<script>

// md: # md:{filename}
// md:
// md: # license
// md: MIT

let muonAlima = function muonAlima (__mapper) {
  __mapper({'xs': xs.xs(__mapper)}) // PROXIES
  __mapper('xs').m('init')({svg: 1, versor: 0, wen: 1, webgl: 0, key: 1}) // INIT

    let f = __mapper('xs').m('props')															// local

  // .................. pics
let tim = {"td":22800,"t0":0,"t1":1000,"t2":1,"t3":1,}
let conform =  {

				"x": {
					"m1":[[[4,3.93]]],"m2":[[[4,3.93]]],"n1":2,"n2":2,"n3":[[[2,1]]],"a":[[[2,3]]],"b":1,		//
					"m1":[[[4, 3.93]]],"m2":[[[4, 3.93]]],"n1":2,"n2":2,"n3":[[[2,1]]],"a":[[[1,2.5]]],"b":1, // ellipse eye
					"m1":6,"m2":6,"n1":1000,"n2":400,"n3":400,"a":1,"b":1, // hexagon
					"m1":5,"m2":5,"n1":2,"n2":7,"n3":7,"a":1,"b":1,	// star
					"m1":5,"m2":5,"n1":1000,"n2":600,"n3":600,"a":1,"b":1, // pentagon


					"m1":5,"m2":5,"n1":2,"n2":7,"n3":7,"a":1,"b":1,	// star
					// "m1":4,"m2":4,"n1":2,"n2":2,"n3":2,"a":1,"b":1,	// circle
					"m1":[[[4,4,5,5,4]]],"m2":[[[4,4,5,5,4]]],"n1":2,"n2":[[[2,2,7,7,2]]],"n3":[[[2,2,7,7,2]]],"a":1,"b":1,
					"m1":4,"m2":4,"n1":[[[2,2,100,100,2]]],"n2":[[[2,2,100,100,2]]],"n3":[[[2,2,100,100,2]]],"a":1,"b":1,	// circle-square
					"m1":4,"m2":4,"n1":[[[100,100]]],"n2":[[[100,100]]],"n3":[[[100,100]]],"a":1,"b":1,	// square

					// "m1":[[[3,3,4,4,4,4,5,5,6,6,4,4]]],
					// "m2":[[[3,3,4,4,4,4,5,5,6,6,4,4]]],
					// "n1":[[[100,100,100,100,100,100,1000,1000,1000,1000,2,2]]],
					// "n2":[[[200,200,200,200,100,100,600,600,400,400,2,2]]],
					// "n3":[[[200,200,200,200,100,100,600,600,400,400,2,2]]],
					// "a":[[[1,1,1,1,1,1,1,1,1,1,1,1]]],
					// "b":[[[1,1,1,1,1,1,1,1,1,1,1,1]]],

					"m1":4,"m2":4,"n1":2,"n2":2,"n3":2,"a":1,"b":1,	// circle

					"ra2": 100,
					"v0": 0,"v1":1,
					"w4": [[[0 , 0 - 1 * 360]]], //  [[[60, 60 + 1 * 360]]], //
					"seg5": 360,"pa6":0,"pb7":-1,
					"fas8": 0,
				},
				"y": {
					"m1":[[[4,3.93]]],"m2":[[[4,3.93]]],"n1":2,"n2":2,"n3":[[[2,1]]],"a":[[[2,3]]],"b":1,		//
					"m1":[[[4, 3.93]]],"m2":[[[4, 3.93]]],"n1":2,"n2":2,"n3":[[[2,1]]],"a":[[[1,2.5]]],"b":1,

					"m1":[[[6,5,5,5]]],"m2":[[[6,5,5,5]]],"n1":[[[1000,2,2,1000]]],"n2":[[[4,7,7,600]]],"n3":[[[4,7,7,600]]],"a":1,"b":1,
					"m1":5,"m2":5,"n1":2,"n2":7,"n3":7,"a":1,"b":1,	// star
					// "m1":4,"m2":4,"n1":2,"n2":2,"n3":2,"a":1,"b":1,	// circle
					"m1":[[[4,4,5,5,4]]],"m2":[[[4,4,5,5,4]]],"n1":2,"n2":[[[2,2,7,7,2]]],"n3":[[[2,2,7,7,2]]],"a":1,"b":1,
					"m1":4,"m2":4,"n1":[[[2,2,100,100,2]]],"n2":[[[2,2,100,100,2]]],"n3":[[[2,2,100,100,2]]],"a":1,"b":1,	// circle-square
						"m1":4,"m2":4,"n1":[[[100,100]]],"n2":[[[100,100]]],"n3":[[[100,100]]],"a":1,"b":1,	// square

					// "m1":[[[3,3,4,4,4,4,5,5,6,6,4,4]]],
					// "m2":[[[3,3,4,4,4,4,5,5,6,6,4,4]]],
					// "n1":[[[100,100,100,100,100,100,1000,1000,1000,1000,2,2]]],
					// "n2":[[[200,200,200,200,100,100,600,600,400,400,2,2]]],
					// "n3":[[[200,200,200,200,100,100,600,600,400,400,2,2]]],
					// "a":[[[1,1,1,1,1,1,1,1,1,1,1,1]]],
					// "b":[[[1,1,1,1,1,1,1,1,1,1,1,1]]],

					"m1":4,"m2":4,"n1":2,"n2":2,"n3":2,"a":1,"b":1,	// circle

					"ra2": 100,
					"v0":0,"v1":1,
					"w4": [[[0 , 0 - 1 * 360]]], //  [[[60, 60 + 1 * 360]]], //
					"seg5": 360,"pa6":0,"pb7":-1,
					"fas8": 0, 		// fas8, antifase
				},
				"z": {
					"m1":6,"m2":6,"n1":[[[100,200]]],"n2":[[[100,2]]],"n3":[[[100,200]]],"a":1,"b":1, // square
					"ra2": [[[260/  Math.sqrt(2),260/  Math.sqrt(2)]]],
					"v0": 0,"v1":1,
					"w4":  0, // [[[180,360,180]]], // [[[0,-360,0]]],
					"seg5": 360,"pa6":0,"pb7":-1,
					"fas8": 0,
				}

			}

let graticule = {

			// "extent": [ [-180, 180, 90, 12],  [-180, 180, 360, 6] ],
			"extent": [ [-180, 180, [[[12,12]]], 12],  [-180, 180, 12, 12] ],

				}

let proform = {
						// "projection": "polyhedronWaterman",
						// "projection": "polyhedronButterFly ",
						"projection": "orthographic ",
						// "projections": ["mercator", "orthographic"], //  "Equirectangular"//
						// "projectidx": 0, // "mercator", // "orthographic",
						"scale": 100,
						"translate": [ 0, 0 ],
						"rotate": [ [[[0,-60]]], [[[0,-60]]], [[[0,-60]]] ],
						"step": [[[0,0,1.1,1.1,0,0]]]
				}

let projidentity = {
						"projection": "identity",
						"scale": 100	,
						"transform": function(x,y){this.stream.point( x / 1, y / 1) },
						"translate": [ 300, 200 ],
						"rotate": [ [[[0, - 1 * 360]]], [[[0, 1 * 360]]], 0 ],
				}

let ereform = {
						"projection": "Orthographic",
						"scale": 1,
						"transform": function(x,y){this.stream.point( x / 1, y / 1) },
						"translate":  [0,0],
						"rotate": [ [[[- 1 * 360, 0]]], [[[0 * 360, 0]]], 0 ],
				}

let state = {

				"x": 0,
				"y": 0,
				"z": 0,

		}

    // .................. geograt
let geograt = {

      halo: 'ent',

      geofold: p => __mapper('xs').m('graticule').vhMultiLine(p.payload.graticule),

      payload: {

        tim: tim,
        ric: {'gid': 'threegrat', 'cid': 'threegrat', 'fid': 'threegrat'},
        boform: { 'csx': 0, 'cf': [[[615, 566]]], 'cs': 333, 'cw': 0.1, 'co': [[[0.03, 0.03]]], 'cp': [[[0.6, 0.6]]]},
        conform: conform,
        proform: proform,
        graticule: {frame: [ [ [-180, 180, 12, 12], [-90, 90, 12, 12] ] ] }

      }

    }
    // .................. geocables
let geocables = {
  halo: 'ent',

  geofold: p => topojson.mesh(
    __mapper("xs").d("worldCables110m").data(),
    __mapper("xs").d("worldCables110m").data().objects.cables),

  payload: {

    tim: tim,
    ric: {'gid': 'threecables', 'cid': 'threecables', 'fid': 'threecables'},
    boform: { 'csx': 0, 'cf': [[[615, 566]]], 'cs': 333, 'cw': 0.1, 'co': [[[0.03, 0.03]]], 'cp': [[[0.6, 0.6]]]},
    conform: conform,
    proform: proform,
    graticule: {frame: [ [ [-180, 180, 12, 12], [-90, 90, 12, 12] ] ] }

  }

}
    // .................. geoearth
let geoearth = {
  halo: 'ent',

  geofold: p => topojson.feature(
    __mapper('xs').d('worldTopo110m').data(),
    __mapper('xs').d('worldTopo110m').data().objects.land),

  payload: {
    tim,
    conform: conform,
    proform: proform,
    ric: {'gid': 'geoearth', 'cid': 'geoearth', 'fid': 'geoearthFront'},
    boform: { 'csx': 0, 'cf': 555, 'cs': 333, 'cw': 0.2, 'co': 0.01, 'cp': 0.9}
  }

}

    // .................. animaApi
    let animas = [
      geograt,
      geoearth,
      geocables,
    ]

    let animaApi = function animaApi () {
      __mapper('xs').m('store').apply({'type': 'UPDANIMA', 'caller': 'alima', 'animas': animas})
    }

    return animaApi
  }

  let __mapper = muonMapper.muonMapper()
  __mapper({'muonAlima': muonAlima(__mapper)}).muonAlima(__mapper)
  </script>
  <body style="cursor:crosshair"></body>
