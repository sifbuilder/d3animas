// Version 0.8.0 d3-force-magnetic - https://github.com/vasturiano/d3-force-magnetic
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(t.d3=t.d3||{})}(this,function(t){"use strict";function n(t){return function(){return t}}function r(t,n,r){if(isNaN(n))return t;var i,e,h,o,s,a,u=t._root,l={data:r},f=t._x0,_=t._x1;if(!u)return t._root=l,t;for(;u.length;)if((o=n>=(e=(f+_)/2))?f=e:_=e,i=u,!(u=u[s=+o]))return i[s]=l,t;if(n===(h=+t._x.call(null,u.data)))return l.next=u,i?i[s]=l:t._root=l,t;do{i=i?i[s]=new Array(2):t._root=new Array(2),(o=n>=(e=(f+_)/2))?f=e:_=e}while((s=+o)==(a=+(h>=e)));return i[a]=u,i[s]=l,t}function i(t,n,r){this.node=t,this.x0=n,this.x1=r}function e(t){return t[0]}function h(t,n){var r=new o(null==n?e:n,NaN,NaN);return null==t?r:r.addAll(t)}function o(t,n,r){this._x=t,this._x0=n,this._x1=r,this._root=void 0}function s(t){for(var n={data:t.data},r=n;t=t.next;)r=r.next={data:t.data};return n}var a=h.prototype=o.prototype;function u(t,n,r,i){if(isNaN(n)||isNaN(r))return t;var e,h,o,s,a,u,l,f,_,c=t._root,x={data:i},y=t._x0,v=t._y0,d=t._x1,w=t._y1;if(!c)return t._root=x,t;for(;c.length;)if((u=n>=(h=(y+d)/2))?y=h:d=h,(l=r>=(o=(v+w)/2))?v=o:w=o,e=c,!(c=c[f=l<<1|u]))return e[f]=x,t;if(s=+t._x.call(null,c.data),a=+t._y.call(null,c.data),n===s&&r===a)return x.next=c,e?e[f]=x:t._root=x,t;do{e=e?e[f]=new Array(4):t._root=new Array(4),(u=n>=(h=(y+d)/2))?y=h:d=h,(l=r>=(o=(v+w)/2))?v=o:w=o}while((f=l<<1|u)==(_=(a>=o)<<1|s>=h));return e[_]=c,e[f]=x,t}function l(t,n,r,i,e){this.node=t,this.x0=n,this.y0=r,this.x1=i,this.y1=e}function f(t){return t[0]}function _(t){return t[1]}function c(t,n,r){var i=new x(null==n?f:n,null==r?_:r,NaN,NaN,NaN,NaN);return null==t?i:i.addAll(t)}function x(t,n,r,i,e,h){this._x=t,this._y=n,this._x0=r,this._y0=i,this._x1=e,this._y1=h,this._root=void 0}function y(t){for(var n={data:t.data},r=n;t=t.next;)r=r.next={data:t.data};return n}a.copy=function(){var t,n,r=new o(this._x,this._x0,this._x1),i=this._root;if(!i)return r;if(!i.length)return r._root=s(i),r;for(t=[{source:i,target:r._root=new Array(2)}];i=t.pop();)for(var e=0;e<2;++e)(n=i.source[e])&&(n.length?t.push({source:n,target:i.target[e]=new Array(2)}):i.target[e]=s(n));return r},a.add=function(t){var n=+this._x.call(null,t);return r(this.cover(n),n,t)},a.addAll=function(t){var n,i,e=t.length,h=new Array(e),o=1/0,s=-1/0;for(n=0;n<e;++n)isNaN(i=+this._x.call(null,t[n]))||(h[n]=i,i<o&&(o=i),i>s&&(s=i));for(s<o&&(o=this._x0,s=this._x1),this.cover(o).cover(s),n=0;n<e;++n)r(this,h[n],t[n]);return this},a.cover=function(t){if(isNaN(t=+t))return this;var n=this._x0,r=this._x1;if(isNaN(n))r=(n=Math.floor(t))+1;else{if(!(n>t||t>r))return this;var i,e,h=r-n,o=this._root;switch(e=+(t<(n+r)/2)){case 0:do{(i=new Array(2))[e]=o,o=i}while(t>(r=n+(h*=2)));break;case 1:do{(i=new Array(2))[e]=o,o=i}while((n=r-(h*=2))>t)}this._root&&this._root.length&&(this._root=o)}return this._x0=n,this._x1=r,this},a.data=function(){var t=[];return this.visit(function(n){if(!n.length)do{t.push(n.data)}while(n=n.next)}),t},a.extent=function(t){return arguments.length?this.cover(+t[0][0]).cover(+t[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]},a.find=function(t,n){var r,e,h,o,s,a=this._x0,u=this._x1,l=[],f=this._root;for(f&&l.push(new i(f,a,u)),null==n?n=1/0:(a=t-n,u=t+n);o=l.pop();)if(!(!(f=o.node)||(e=o.x0)>u||(h=o.x1)<a))if(f.length){var _=(e+h)/2;l.push(new i(f[1],_,h),new i(f[0],e,_)),(s=+(t>=_))&&(o=l[l.length-1],l[l.length-1]=l[l.length-1-s],l[l.length-1-s]=o)}else{var c=Math.abs(t-+this._x.call(null,f.data));c<n&&(n=c,a=t-c,u=t+c,r=f.data)}return r},a.remove=function(t){if(isNaN(h=+this._x.call(null,t)))return this;var n,r,i,e,h,o,s,a,u,l=this._root,f=this._x0,_=this._x1;if(!l)return this;if(l.length)for(;;){if((s=h>=(o=(f+_)/2))?f=o:_=o,n=l,!(l=l[a=+s]))return this;if(!l.length)break;n[a+1&1]&&(r=n,u=a)}for(;l.data!==t;)if(i=l,!(l=l.next))return this;return(e=l.next)&&delete l.next,i?(e?i.next=e:delete i.next,this):n?(e?n[a]=e:delete n[a],(l=n[0]||n[1])&&l===(n[1]||n[0])&&!l.length&&(r?r[u]=l:this._root=l),this):(this._root=e,this)},a.removeAll=function(t){for(var n=0,r=t.length;n<r;++n)this.remove(t[n]);return this},a.root=function(){return this._root},a.size=function(){var t=0;return this.visit(function(n){if(!n.length)do{++t}while(n=n.next)}),t},a.visit=function(t){var n,r,e,h,o=[],s=this._root;for(s&&o.push(new i(s,this._x0,this._x1));n=o.pop();)if(!t(s=n.node,e=n.x0,h=n.x1)&&s.length){var a=(e+h)/2;(r=s[1])&&o.push(new i(r,a,h)),(r=s[0])&&o.push(new i(r,e,a))}return this},a.visitAfter=function(t){var n,r=[],e=[];for(this._root&&r.push(new i(this._root,this._x0,this._x1));n=r.pop();){var h=n.node;if(h.length){var o,s=n.x0,a=n.x1,u=(s+a)/2;(o=h[0])&&r.push(new i(o,s,u)),(o=h[1])&&r.push(new i(o,u,a))}e.push(n)}for(;n=e.pop();)t(n.node,n.x0,n.x1);return this},a.x=function(t){return arguments.length?(this._x=t,this):this._x};var v=c.prototype=x.prototype;function d(t,n,r,i,e){if(isNaN(n)||isNaN(r)||isNaN(i))return t;var h,o,s,a,u,l,f,_,c,x,y,v,d=t._root,w={data:e},p=t._x0,g=t._y0,N=t._z0,z=t._x1,A=t._y1,b=t._z1;if(!d)return t._root=w,t;for(;d.length;)if((_=n>=(o=(p+z)/2))?p=o:z=o,(c=r>=(s=(g+A)/2))?g=s:A=s,(x=i>=(a=(N+b)/2))?N=a:b=a,h=d,!(d=d[y=x<<2|c<<1|_]))return h[y]=w,t;if(u=+t._x.call(null,d.data),l=+t._y.call(null,d.data),f=+t._z.call(null,d.data),n===u&&r===l&&i===f)return w.next=d,h?h[y]=w:t._root=w,t;do{h=h?h[y]=new Array(8):t._root=new Array(8),(_=n>=(o=(p+z)/2))?p=o:z=o,(c=r>=(s=(g+A)/2))?g=s:A=s,(x=i>=(a=(N+b)/2))?N=a:b=a}while((y=x<<2|c<<1|_)==(v=(f>=a)<<2|(l>=s)<<1|u>=o));return h[v]=d,h[y]=w,t}function w(t,n,r,i,e,h,o){this.node=t,this.x0=n,this.y0=r,this.z0=i,this.x1=e,this.y1=h,this.z1=o}function p(t){return t[0]}function g(t){return t[1]}function N(t){return t[2]}function z(t,n,r,i){var e=new A(null==n?p:n,null==r?g:r,null==i?N:i,NaN,NaN,NaN,NaN,NaN,NaN);return null==t?e:e.addAll(t)}function A(t,n,r,i,e,h,o,s,a){this._x=t,this._y=n,this._z=r,this._x0=i,this._y0=e,this._z0=h,this._x1=o,this._y1=s,this._z1=a,this._root=void 0}function b(t){for(var n={data:t.data},r=n;t=t.next;)r=r.next={data:t.data};return n}v.copy=function(){var t,n,r=new x(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return r;if(!i.length)return r._root=y(i),r;for(t=[{source:i,target:r._root=new Array(4)}];i=t.pop();)for(var e=0;e<4;++e)(n=i.source[e])&&(n.length?t.push({source:n,target:i.target[e]=new Array(4)}):i.target[e]=y(n));return r},v.add=function(t){var n=+this._x.call(null,t),r=+this._y.call(null,t);return u(this.cover(n,r),n,r,t)},v.addAll=function(t){var n,r,i,e,h=t.length,o=new Array(h),s=new Array(h),a=1/0,l=1/0,f=-1/0,_=-1/0;for(r=0;r<h;++r)isNaN(i=+this._x.call(null,n=t[r]))||isNaN(e=+this._y.call(null,n))||(o[r]=i,s[r]=e,i<a&&(a=i),i>f&&(f=i),e<l&&(l=e),e>_&&(_=e));for(f<a&&(a=this._x0,f=this._x1),_<l&&(l=this._y0,_=this._y1),this.cover(a,l).cover(f,_),r=0;r<h;++r)u(this,o[r],s[r],t[r]);return this},v.cover=function(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var r=this._x0,i=this._y0,e=this._x1,h=this._y1;if(isNaN(r))e=(r=Math.floor(t))+1,h=(i=Math.floor(n))+1;else{if(!(r>t||t>e||i>n||n>h))return this;var o,s,a=e-r,u=this._root;switch(s=(n<(i+h)/2)<<1|t<(r+e)/2){case 0:do{(o=new Array(4))[s]=u,u=o}while(h=i+(a*=2),t>(e=r+a)||n>h);break;case 1:do{(o=new Array(4))[s]=u,u=o}while(h=i+(a*=2),(r=e-a)>t||n>h);break;case 2:do{(o=new Array(4))[s]=u,u=o}while(i=h-(a*=2),t>(e=r+a)||i>n);break;case 3:do{(o=new Array(4))[s]=u,u=o}while(i=h-(a*=2),(r=e-a)>t||i>n)}this._root&&this._root.length&&(this._root=u)}return this._x0=r,this._y0=i,this._x1=e,this._y1=h,this},v.data=function(){var t=[];return this.visit(function(n){if(!n.length)do{t.push(n.data)}while(n=n.next)}),t},v.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},v.find=function(t,n,r){var i,e,h,o,s,a,u,f=this._x0,_=this._y0,c=this._x1,x=this._y1,y=[],v=this._root;for(v&&y.push(new l(v,f,_,c,x)),null==r?r=1/0:(f=t-r,_=n-r,c=t+r,x=n+r,r*=r);a=y.pop();)if(!(!(v=a.node)||(e=a.x0)>c||(h=a.y0)>x||(o=a.x1)<f||(s=a.y1)<_))if(v.length){var d=(e+o)/2,w=(h+s)/2;y.push(new l(v[3],d,w,o,s),new l(v[2],e,w,d,s),new l(v[1],d,h,o,w),new l(v[0],e,h,d,w)),(u=(n>=w)<<1|t>=d)&&(a=y[y.length-1],y[y.length-1]=y[y.length-1-u],y[y.length-1-u]=a)}else{var p=t-+this._x.call(null,v.data),g=n-+this._y.call(null,v.data),N=p*p+g*g;if(N<r){var z=Math.sqrt(r=N);f=t-z,_=n-z,c=t+z,x=n+z,i=v.data}}return i},v.remove=function(t){if(isNaN(h=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var n,r,i,e,h,o,s,a,u,l,f,_,c=this._root,x=this._x0,y=this._y0,v=this._x1,d=this._y1;if(!c)return this;if(c.length)for(;;){if((u=h>=(s=(x+v)/2))?x=s:v=s,(l=o>=(a=(y+d)/2))?y=a:d=a,n=c,!(c=c[f=l<<1|u]))return this;if(!c.length)break;(n[f+1&3]||n[f+2&3]||n[f+3&3])&&(r=n,_=f)}for(;c.data!==t;)if(i=c,!(c=c.next))return this;return(e=c.next)&&delete c.next,i?(e?i.next=e:delete i.next,this):n?(e?n[f]=e:delete n[f],(c=n[0]||n[1]||n[2]||n[3])&&c===(n[3]||n[2]||n[1]||n[0])&&!c.length&&(r?r[_]=c:this._root=c),this):(this._root=e,this)},v.removeAll=function(t){for(var n=0,r=t.length;n<r;++n)this.remove(t[n]);return this},v.root=function(){return this._root},v.size=function(){var t=0;return this.visit(function(n){if(!n.length)do{++t}while(n=n.next)}),t},v.visit=function(t){var n,r,i,e,h,o,s=[],a=this._root;for(a&&s.push(new l(a,this._x0,this._y0,this._x1,this._y1));n=s.pop();)if(!t(a=n.node,i=n.x0,e=n.y0,h=n.x1,o=n.y1)&&a.length){var u=(i+h)/2,f=(e+o)/2;(r=a[3])&&s.push(new l(r,u,f,h,o)),(r=a[2])&&s.push(new l(r,i,f,u,o)),(r=a[1])&&s.push(new l(r,u,e,h,f)),(r=a[0])&&s.push(new l(r,i,e,u,f))}return this},v.visitAfter=function(t){var n,r=[],i=[];for(this._root&&r.push(new l(this._root,this._x0,this._y0,this._x1,this._y1));n=r.pop();){var e=n.node;if(e.length){var h,o=n.x0,s=n.y0,a=n.x1,u=n.y1,f=(o+a)/2,_=(s+u)/2;(h=e[0])&&r.push(new l(h,o,s,f,_)),(h=e[1])&&r.push(new l(h,f,s,a,_)),(h=e[2])&&r.push(new l(h,o,_,f,u)),(h=e[3])&&r.push(new l(h,f,_,a,u))}i.push(n)}for(;n=i.pop();)t(n.node,n.x0,n.y0,n.x1,n.y1);return this},v.x=function(t){return arguments.length?(this._x=t,this):this._x},v.y=function(t){return arguments.length?(this._y=t,this):this._y};var m=z.prototype=A.prototype;m.copy=function(){var t,n,r=new A(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),i=this._root;if(!i)return r;if(!i.length)return r._root=b(i),r;for(t=[{source:i,target:r._root=new Array(8)}];i=t.pop();)for(var e=0;e<8;++e)(n=i.source[e])&&(n.length?t.push({source:n,target:i.target[e]=new Array(8)}):i.target[e]=b(n));return r},m.add=function(t){var n=+this._x.call(null,t),r=+this._y.call(null,t),i=+this._z.call(null,t);return d(this.cover(n,r,i),n,r,i,t)},m.addAll=function(t){var n,r,i,e,h,o=t.length,s=new Array(o),a=new Array(o),u=new Array(o),l=1/0,f=1/0,_=1/0,c=-1/0,x=-1/0,y=-1/0;for(r=0;r<o;++r)isNaN(i=+this._x.call(null,n=t[r]))||isNaN(e=+this._y.call(null,n))||isNaN(h=+this._z.call(null,n))||(s[r]=i,a[r]=e,u[r]=h,i<l&&(l=i),i>c&&(c=i),e<f&&(f=e),e>x&&(x=e),h<_&&(_=h),h>y&&(y=h));for(c<l&&(l=this._x0,c=this._x1),x<f&&(f=this._y0,x=this._y1),y<_&&(_=this._z0,y=this._z1),this.cover(l,f,_).cover(c,x,y),r=0;r<o;++r)d(this,s[r],a[r],u[r],t[r]);return this},m.cover=function(t,n,r){if(isNaN(t=+t)||isNaN(n=+n)||isNaN(r=+r))return this;var i=this._x0,e=this._y0,h=this._z0,o=this._x1,s=this._y1,a=this._z1;if(isNaN(i))o=(i=Math.floor(t))+1,s=(e=Math.floor(n))+1,a=(h=Math.floor(r))+1;else{if(!(i>t||t>o||e>n||n>s||h>r||r>a))return this;var u,l,f=o-i,_=this._root;switch(l=(r<(h+a)/2)<<2|(n<(e+s)/2)<<1|t<(i+o)/2){case 0:do{(u=new Array(8))[l]=_,_=u}while(s=e+(f*=2),a=h+f,t>(o=i+f)||n>s||r>a);break;case 1:do{(u=new Array(8))[l]=_,_=u}while(s=e+(f*=2),a=h+f,(i=o-f)>t||n>s||r>a);break;case 2:do{(u=new Array(8))[l]=_,_=u}while(e=s-(f*=2),a=h+f,t>(o=i+f)||e>n||r>a);break;case 3:do{(u=new Array(8))[l]=_,_=u}while(e=s-(f*=2),a=h+f,(i=o-f)>t||e>n||r>a);break;case 4:do{(u=new Array(8))[l]=_,_=u}while(s=e+(f*=2),h=a-f,t>(o=i+f)||n>s||h>r);break;case 5:do{(u=new Array(8))[l]=_,_=u}while(s=e+(f*=2),h=a-f,(i=o-f)>t||n>s||h>r);break;case 6:do{(u=new Array(8))[l]=_,_=u}while(e=s-(f*=2),h=a-f,t>(o=i+f)||e>n||h>r);break;case 7:do{(u=new Array(8))[l]=_,_=u}while(e=s-(f*=2),h=a-f,(i=o-f)>t||e>n||h>r)}this._root&&this._root.length&&(this._root=_)}return this._x0=i,this._y0=e,this._z0=h,this._x1=o,this._y1=s,this._z1=a,this},m.data=function(){var t=[];return this.visit(function(n){if(!n.length)do{t.push(n.data)}while(n=n.next)}),t},m.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1],+t[0][2]).cover(+t[1][0],+t[1][1],+t[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]},m.find=function(t,n,r,i){var e,h,o,s,a,u,l,f,_,c=this._x0,x=this._y0,y=this._z0,v=this._x1,d=this._y1,p=this._z1,g=[],N=this._root;for(N&&g.push(new w(N,c,x,y,v,d,p)),null==i?i=1/0:(c=t-i,x=n-i,y=r-i,v=t+i,d=n+i,p=r+i,i*=i);f=g.pop();)if(!(!(N=f.node)||(h=f.x0)>v||(o=f.y0)>d||(s=f.z0)>p||(a=f.x1)<c||(u=f.y1)<x||(l=f.z1)<y))if(N.length){var z=(h+a)/2,A=(o+u)/2,b=(s+l)/2;g.push(new w(N[7],z,A,b,a,u,l),new w(N[6],h,A,b,z,u,l),new w(N[5],z,o,b,a,A,l),new w(N[4],h,o,b,z,A,l),new w(N[3],z,A,s,a,u,b),new w(N[2],h,A,s,z,u,b),new w(N[1],z,o,s,a,A,b),new w(N[0],h,o,s,z,A,b)),(_=(r>=b)<<2|(n>=A)<<1|t>=z)&&(f=g[g.length-1],g[g.length-1]=g[g.length-1-_],g[g.length-1-_]=f)}else{var m=t-+this._x.call(null,N.data),k=n-+this._y.call(null,N.data),M=r-+this._z.call(null,N.data),S=m*m+k*k+M*M;if(S<i){var j=Math.sqrt(i=S);c=t-j,x=n-j,y=r-j,v=t+j,d=n+j,p=r+j,e=N.data}}return e},m.remove=function(t){if(isNaN(h=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t))||isNaN(s=+this._z.call(null,t)))return this;var n,r,i,e,h,o,s,a,u,l,f,_,c,x,y,v=this._root,d=this._x0,w=this._y0,p=this._z0,g=this._x1,N=this._y1,z=this._z1;if(!v)return this;if(v.length)for(;;){if((f=h>=(a=(d+g)/2))?d=a:g=a,(_=o>=(u=(w+N)/2))?w=u:N=u,(c=s>=(l=(p+z)/2))?p=l:z=l,n=v,!(v=v[x=c<<2|_<<1|f]))return this;if(!v.length)break;(n[x+1&7]||n[x+2&7]||n[x+3&7]||n[x+4&7]||n[x+5&7]||n[x+6&7]||n[x+7&7])&&(r=n,y=x)}for(;v.data!==t;)if(i=v,!(v=v.next))return this;return(e=v.next)&&delete v.next,i?(e?i.next=e:delete i.next,this):n?(e?n[x]=e:delete n[x],(v=n[0]||n[1]||n[2]||n[3]||n[4]||n[5]||n[6]||n[7])&&v===(n[7]||n[6]||n[5]||n[4]||n[3]||n[2]||n[1]||n[0])&&!v.length&&(r?r[y]=v:this._root=v),this):(this._root=e,this)},m.removeAll=function(t){for(var n=0,r=t.length;n<r;++n)this.remove(t[n]);return this},m.root=function(){return this._root},m.size=function(){var t=0;return this.visit(function(n){if(!n.length)do{++t}while(n=n.next)}),t},m.visit=function(t){var n,r,i,e,h,o,s,a,u=[],l=this._root;for(l&&u.push(new w(l,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));n=u.pop();)if(!t(l=n.node,i=n.x0,e=n.y0,h=n.z0,o=n.x1,s=n.y1,a=n.z1)&&l.length){var f=(i+o)/2,_=(e+s)/2,c=(h+a)/2;(r=l[7])&&u.push(new w(r,f,_,c,o,s,a)),(r=l[6])&&u.push(new w(r,i,_,c,f,s,a)),(r=l[5])&&u.push(new w(r,f,e,c,o,_,a)),(r=l[4])&&u.push(new w(r,i,e,c,f,_,a)),(r=l[3])&&u.push(new w(r,f,_,h,o,s,c)),(r=l[2])&&u.push(new w(r,i,_,h,f,s,c)),(r=l[1])&&u.push(new w(r,f,e,h,o,_,c)),(r=l[0])&&u.push(new w(r,i,e,h,f,_,c))}return this},m.visitAfter=function(t){var n,r=[],i=[];for(this._root&&r.push(new w(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));n=r.pop();){var e=n.node;if(e.length){var h,o=n.x0,s=n.y0,a=n.z0,u=n.x1,l=n.y1,f=n.z1,_=(o+u)/2,c=(s+l)/2,x=(a+f)/2;(h=e[0])&&r.push(new w(h,o,s,a,_,c,x)),(h=e[1])&&r.push(new w(h,_,s,a,u,c,x)),(h=e[2])&&r.push(new w(h,o,c,a,_,l,x)),(h=e[3])&&r.push(new w(h,_,c,a,u,l,x)),(h=e[4])&&r.push(new w(h,o,s,x,_,c,f)),(h=e[5])&&r.push(new w(h,_,s,x,u,c,f)),(h=e[6])&&r.push(new w(h,o,c,x,_,l,f)),(h=e[7])&&r.push(new w(h,_,c,x,u,l,f))}i.push(n)}for(;n=i.pop();)t(n.node,n.x0,n.y0,n.z0,n.x1,n.y1,n.z1);return this},m.x=function(t){return arguments.length?(this._x=t,this):this._x},m.y=function(t){return arguments.length?(this._y=t,this):this._y},m.z=function(t){return arguments.length?(this._z=t,this):this._z};var k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.forceMagnetic=function(){var t=void 0,r=[],i=[],e=function(t){return t.index},o=function(t){return 100},s=function(t){return 1},a=function(t,n){return null},u=function(t){return 1/(t*t)},l=.9;function f(n){if(i.length)for(var e=0;e<i.length;e++){var f=i[e],_=f.target.x-f.source.x,x=f.target.y-f.source.y||0,y=f.target.z-f.target.z||0,v=k(_,x,y);if(0!==v){var d=n*s(f)*u(v),w=o(f.source),p=o(f.target),g=a(w,p),N=m(p,g)*d,A=m(w,g)*d;f.source.vx+=_/v*N,f.target.vx-=_/v*A,t>1&&(f.source.vy+=x/v*N,f.target.vy-=x/v*A),t>2&&(f.source.vz+=y/v*N,f.target.vz-=y/v*A)}}else!function(){for(var i=(1===t?h(r,function(t){return t.x}):2===t?c(r,function(t){return t.x},function(t){return t.y}):3===t?z(r,function(t){return t.x},function(t){return t.y},function(t){return t.z}):null).visitAfter(b),e=n*s(),f=function(n){var h=r[n],s=o(h);i.visit(function(n,r,i,o,f){if(!n.value)return!0;var _=[i,o,f][t-1],c=n.x-h.x,x=n.y-h.y||0,y=n.z-h.z||0,v=k(c,x,y);if((_-r)/v<l)return v>0&&d(),!0;if(!n.length&&0!==v)do{n.data!==h&&d()}while(n=n.next);function d(){var r=m(n.value,a(s,n.value))*e*u(v);h.vx+=c/v*r,t>1&&(h.vy+=x/v*r),t>2&&(h.vz+=y/v*r)}})},_=0;_<r.length;_++)f(_)}();function b(n){var r=0,i=void 0,e=void 0,h=0,s=void 0,a=void 0,u=void 0,l=void 0;if(n.length){for(s=a=u=l=0;l<4;++l)(i=n[l])&&(e=Math.abs(i.value))&&(r+=i.value,h+=e,s+=e*(i.x||0),a+=e*(i.y||0),u+=e*(i.z||0));n.x=s/h,t>1&&(n.y=a/h),t>2&&(n.z=u/h)}else{(i=n).x=i.data.x,t>1&&(i.y=i.data.y),t>2&&(i.z=i.data.z);do{r+=o(i.data)}while(i=i.next)}n.value=r}function m(t,n){return null===n?t:Math.abs(t)*(n?1:-1)}function k(t,n,r){return Math.sqrt(t*t+n*n+r*r)}}function _(){var t={};r.forEach(function(n){t[e(n)]=n}),i.forEach(function(n){"object"!==k(n.source)&&(n.source=t[n.source]||n.source),"object"!==k(n.target)&&(n.target=t[n.target]||n.target)})}return f.initialize=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;r=n,t=i,_()},f.links=function(t){return arguments.length?(i=t,_(),f):i},f.id=function(t){return arguments.length?(e=t,f):e},f.charge=function(t){return arguments.length?(o="function"==typeof t?t:n(+t),f):o},f.strength=function(t){return arguments.length?(s="function"==typeof t?t:n(+t),f):s},f.polarity=function(t){return arguments.length?(a="function"==typeof t?t:n(+t),f):a},f.distanceWeight=function(t){return arguments.length?(u=t,f):u},f.theta=function(t){return arguments.length?(l=t,f):l},f},Object.defineProperty(t,"__esModule",{value:!0})});