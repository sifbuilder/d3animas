<!DOCTYPE html>
<meta charset="utf-8">
<title>animas</title>
<head >

  <style>
    body { margin:0;position:fixed;top:0;right:0;bottom:0;left:0; }
    div#fps,svg { position: fixed; top:0; left:0; color: white; }
  </style>

</head>
<body style="cursor:crosshair"></body>
<div id="viewframe" class="viewframe"></div>

<script src='https://d3js.org/d3.v4.min.js'></script>
<script src='https://d3js.org/d3-geo.v1.min.js'></script>
<script src='https://d3js.org/d3-geo-projection.v2.min.js'></script>
<script src='https:////unpkg.com/d3-force-3d@1.0.7/build/d3-force-3d.bundle.min.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/topojson/3.0.0/topojson.min.js'></script>
<script src='https:////cdnjs.cloudflare.com/ajax/libs/three.js/84/three.min.js'></script>
<script src='https:////unpkg.com/three-trackballcontrols-web@0.0.2/dist/three-trackballcontrols.min.js'></script>
<script src="enls.js"></script>
<script src="ents.js"></script>

<script>

let muonAlima = function muonAlima(__mapper) {

  __mapper({"xs": xs.xs(__mapper)})               // PROXIES
  __mapper("xs").b("init")({svg:1,versor:0,wen:1,webgl:1})

  let f = __mapper({"props": bosonProps.bosonProps()}).props()
  let g = __mapper("xs").m("geom")
  let w = __mapper("xs").m("wen")

  /**********************
   *    @
   */
  let r = __mapper("xs").r("renderer"),
    width = r.width(),
    height = r.height()

  let rotInit = [0,45,0],
    rotation = [0,0,0],
    rotMatrix,
    stars = []

  let versor = __mapper("xs").b("versor")()
  let wen = __mapper("xs").c("wen")({rotInit})

  /*******************************************
 *      @pics
 *
 */
  let tim = {"td":19800,"t0":0,"t1":1000,"t2":1,"t3":1,}
  
  let proform = {

    "projection": "uniwen",
    "translate":  [ 280 , 200],
    "scale": 60,
    "rotate": [-5,50,0],
    "focale": 4,
    "zafin": [ [[[0,0,1,1,1,0]]], [[[0,0,1,1,1,0]]] ],  // [0,1], // [1,0]
    "dims": 3,
    "control": "wen",
  }

  let payload = {
  
    rotBase: [1,0,0,  0,1,0,  0,0,1],
    rotInit: [0,0,0],
    velDecay:     0.95,
    velRot:			[1,0,0], //  [-6e-3, 7.6e-3, 2.13e-3],

    doxStar:			0 , // 1000, //  1,
    diStar:				1,		
    maxZStar:			[[[1.5,1.5]]],			// star passed
    hiStar:				10, // // [[[16,998]]], //   [[[4,4]]],
    fStar:				12 , // 100, //   0.1,
    velStar:			[[[0.05,0.2]]]  , // [100,100], // [0.400, 0.400],

    starRecord: 	{ cf: 444, cs: 11, co: 0.99, cp: 1, },
    starRadious: 	2,

    nbstars:      [[[6,24]]], // [[[24,24]]],  // 200 
  

    points: [
      [-1, -1,  1],   // 0
      [ 1, -1,  1],   // 1
      [ 1, 1,  1],    // 2
      [-1, 1,  1],    // 3
      [ 1, -1, -1],   // 4
      [-1, -1, -1],   // 5
      [-1, 1, -1],    // 6
      [ 1, 1, -1],    // 7
    ],
    faces: [
      {
        pointsx: [0,1,2,3,0],
        name: "front",
        boform: { cf: 222, cs: 355, co: [[[0.2,0.09,0.9,0.9]]], cp: 1, }},
      {
        pointsx: [4,5,6,7,4],
        name: "back",
        boform: { cf: 888, cs: 455, co: [[[0.2,0.09,0.9,0.9]]], cp: 1, }},
      {
        pointsx: [1,4,7,2,1],
        name: "right",
        boform: { cf: 444, cs: 555, co: [[[0.2,0.09,0.9,0.9]]], cp: 1, }},
      {
        pointsx: [5,0,3,6,5],
        name: "left",
        boform: { cf: 555, cs: 655, co: [[[0.2,0.09,0.9,0.9]]], cp: 1, }},
      {
        pointsx: [3,2,7,6,3],
        name: "bottom",
        boform: { cf: 666, cs: 755, co: [[[0.2,0.09,0.9,0.9]]], cp: 1, }},
      {
        pointsx: [5,4,1,0,5],
        name: "top",
        boform: { cf: 777, cs: 855, co: [[[0.2,0.09,0.9,0.9]]], cp: 1, }}

    ],

  }
  /*******************************************
 *      @animas
 *
 */
  let aniCube = {

    "tim": tim,
    "ric": {"gid":"aniCube","cid":"aniCube","fid":"aniCube",},
    "halo": "stars",
    "boform":{ "csx":0,"cf":666,"cs":666,"cw":0.9,"co":0.9,"cp":0.9,},
    "proform": proform,
    "payload": payload,
    
  }    

  let animas = [
    aniCube,  // h.stars g.uniwen
  ]
  
  let animaApi = function animaApi() {
    __mapper("xs").m("store").apply({"type":"UPDANIMA","caller":"alima","animas":animas})
  }

  return animaApi

}

let __mapper = bosonMapper.bosonMapper()
__mapper({"muonAlima": muonAlima(__mapper)}).muonAlima(__mapper)
</script>
<body style="cursor:crosshair"></body>
