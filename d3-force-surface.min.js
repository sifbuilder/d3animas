// Version 0.5.5 d3-force-surface - https://github.com/vasturiano/d3-force-surface
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(t.d3=t.d3||{})}(this,function(t){"use strict";var n=function(t){return function(){return t}};t.forceSurface=function(){function t(){function t(t,n){function r(t,n,r){var o=(r.y-t.y)*(n.x-t.x),f=(n.y-t.y)*(r.x-t.x);return o>f+Number.EPSILON?1:o+Number.EPSILON<f?-1:0}return r(t.from,n.from,n.to)!=r(t.to,n.from,n.to)&&r(t.from,t.to,n.from)!=r(t.from,t.to,n.to)}function n(t,n){var r=t.x,o=t.y;return{x:r+n.x,y:o+n.y}}function y(t,r){var o=t.from,f=t.to;return{from:n(o,r),to:n(f,r)}}function x(t,n){var r=m(t.x,t.y);return v(r.d,r.a+n)}function m(t,n){return t=t||0,{d:Math.sqrt(t*t+n*n),a:0===t&&0===n?0:Math.atan(n/t)+(t<0?Math.PI:0)}}function v(t,n){return{x:t*Math.cos(n),y:t*Math.sin(n)}}function h(t){for(var n=2*Math.PI;t<0;)t+=n;for(;t>n;)t-=n;return t}r.forEach(function(r){var d=e(r),s=m(r.vx,r.vy),l={from:{x:r.x,y:r.y},to:{x:r.x+r.vx,y:r.y+r.vy}};o.forEach(function(o){var e={from:u(o),to:i(o)},M=m(e.to.x-e.from.x,e.to.y-e.from.y),p=h(M.a-s.a)<Math.PI;if(!p||!a(o)){var I=y(l,v(d,M.a+Math.PI/2*(p?-1:1))),P=t(e,{from:n(r,v(d,M.a-Math.PI/2)),to:n(r,v(d,M.a+Math.PI/2))});if(P||t(e,I)){var g=v(s.d,s.a-M.a);g.y*=-f;var b=x(g,M.a);if(r.vx=b.x,r.vy=b.y,P&&!a(o)){var E=v(x(n(I.from,{x:-e.from.x,y:-e.from.y}),-M.a).y,M.a-Math.PI/2);r.x+=E.x,r.y+=E.y}c&&c(r,o)}}})})}var r=void 0,o=[],f=1,e=function(t){return 1},u=function(t){return t.from},i=function(t){return t.to},a=function(t){return!!t.oneWay},c=void 0;return t.initialize=function(t){r=t},t.surfaces=function(n){return arguments.length?(o=n,t):o},t.elasticity=function(n){return arguments.length?(f=n,t):f},t.radius=function(r){return arguments.length?(e="function"==typeof r?r:n(+r),t):e},t.from=function(n){return arguments.length?(u=n,t):u},t.to=function(n){return arguments.length?(i=n,t):i},t.oneWay=function(r){return arguments.length?(a="function"==typeof r?r:n(!!r),t):a},t.onImpact=function(n){return arguments.length?(c=n,t):c},t},Object.defineProperty(t,"__esModule",{value:!0})});